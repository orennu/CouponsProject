<div class="container-fluid mt-4">
    <h1>Profile Settings</h1>
    <div class="row rounded p-4 m-0">
        <div class="col-md-5">
            <form
                [formGroup]="profileForm"
                (ngSubmit)="onFormSubmit()">
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="firstname">
                        First Name
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="firstname"
                        value="{{ profile?.firstName }}"
                        formControlName="firstName">
                    <span
                        *ngIf="isMissing(firstName)"
                        class="text-danger">
                        field is required.
                    </span>
                    <span
                        *ngIf="isInvalid(firstName)"
                        class="text-danger">
                        invalid input.
                    </span>
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="lastname">
                        Last Name
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="lastname"
                        value="{{ profile?.lastName }}"
                        formControlName="lastName">
                    <span
                        *ngIf="isMissing(lastName)"
                        class="text-danger">
                        field is required.
                    </span>
                    <span
                        *ngIf="isInvalid(lastName)"
                        class="text-danger">
                        invalid input.
                    </span>
                </div>
                <div
                    *ngIf="role === 'ADMIN' || role === 'COMPANY'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="username">
                        Username
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="username"
                        value="{{ profile?.userName }}"
                        formControlName="userName">
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3"
                    formGroupName="user">
                  <label
                      class="control-label h6 small font-weight-bold"
                      for="username">
                      Username
                  </label>
                  <input
                      type="text"
                      class="form-control"
                      name="username"
                      value="{{ profile?.userName }}"
                      formControlName="userName">
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3"
                    formGroupName="user">
                  <label
                      class="control-label h6 small font-weight-bold"
                      for="email">
                      Email
                  </label>
                  <input
                      type="text"
                      class="form-control"
                      name="email"
                      value="{{ profile?.email }}"
                      formControlName="email">
                </div>
                <div
                    *ngIf="role === 'ADMIN' || role === 'COMPANY'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="email">
                        Email
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="email"
                        value="{{ profile?.email }}"
                        formControlName="email">
                </div>
                <div
                    *ngIf="role === 'ADMIN' || role === 'COMPANY'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="type">
                        Role
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      name="type"
                      formControlName="type">
                </div>
                <div
                    *ngIf="role === 'COMPANY'"
                    class="form-group required mb-3">
                    <label
                      class="control-label h6 small font-weight-bold"
                      for="companyName">
                      Company Name
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      name="companyName"
                      value="{{ profile?.company?.name }}"
                      formControlName="companyName">
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="address">
                        Address
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="address"
                        value="{{ profile?.address }}"
                        formControlName="address">
                    <span
                        *ngIf="isMissing(address)"
                        class="text-danger">
                        field is required.
                    </span>
                    <span
                        *ngIf="isInvalid(address)"
                        class="text-danger">
                        invalid input.
                    </span>
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="form-group required mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="phoneNumber">
                        Phone
                    </label>
                    <input
                        type="text"
                        class="form-control"
                        name="phoneNumber"
                        value="{{ profile?.phoneNumber }}"
                        formControlName="phoneNumber">
                    <span
                        *ngIf="isMissing(phoneNumber)"
                        class="text-danger">
                        field is required.
                    </span>
                    <span
                        *ngIf="isInvalid(phoneNumber)"
                        class="text-danger">
                        invalid input.
                    </span>
                </div>
                <div
                    *ngIf="role === 'CUSTOMER'"
                    class="mb-3">
                    <label
                        class="control-label h6 small font-weight-bold"
                        for="dateOfBirth">
                        Date of Birth
                    </label>
                    <input
                        [disabled]="true"
                        type="text"
                        class="form-control"
                        name="dateOfBirth"
                        value="{{ profile?.dateOfBirth | date: 'dd/MM/yyyy' }}">
                </div>
                <div
                  *ngIf="role === 'CUSTOMER'"
                  class="container pl-0">
                  <button
                      type="submit"
                      class="btn btn-primary"
                      [disabled]="!profileForm.valid || profileForm.pristine">
                      Submit
                  </button>
                </div>
                <div
                    *ngIf="formSubmitted">
                    <div
                        class="text-success m-2"
                        style="font-weight: bolder;">
                        <span>&#10003;</span> Your profile was saved successfully.
                    </div>
                </div>
                <div
                    *ngIf="formSubmitFailure">
                    <div
                        class="text-danger m-2"
                        style="font-weight: bolder;">
                        <span>&#33;</span> {{ formFailureReason }}.
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
